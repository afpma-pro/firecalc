# =============================================================================
# FireCalc Docker Environment Variables - Example Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp docker/.env.example .env
#
# SECURITY WARNING: Never commit the actual .env file to version control!
# The .env file contains sensitive information and should be kept private.
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Deployment Configuration
# -----------------------------------------------------------------------------

# UI Domain name for SSL certificate (REQUIRED)
# Must match DNS A/AAAA record pointing to this server
# Serves the FireCalc UI static files
# Example for staging: firecalc.staging.example.com
# Example for production: firecalc.example.com
UI_DOMAIN=firecalc.staging.example.com

# API Domain name for SSL certificate (REQUIRED)
# Must match DNS A/AAAA record pointing to this server
# Proxies API requests to the backend service
# Example for staging: api.staging.example.com
# Example for production: api.example.com
API_DOMAIN=api.staging.firecalc.example.com

# Application environment (REQUIRED)
# Options: development, staging, production
# This determines which configuration files are loaded from configs/{FIRECALC_ENV}/
FIRECALC_ENV=staging

# Let's Encrypt email for certificate notifications (OPTIONAL)
# Recommended for production to receive renewal notifications
# LETSENCRYPT_EMAIL=admin@example.com

# Let's Encrypt staging mode (OPTIONAL)
# Set to true for testing certificate issuance (avoids rate limits)
# Set to false or omit for production certificates
# LETSENCRYPT_STAGING=false

# -----------------------------------------------------------------------------
# Company Information
# -----------------------------------------------------------------------------
# These variables are used by the invoice system to populate company details
# Update with your organization's actual information

# Company Legal Details
COMPANY_LEGAL_NAME="Your Company Legal Name Inc"
COMPANY_DISPLAY_NAME="Your Company"
COMPANY_EMAIL="billing@yourcompany.com"
COMPANY_PHONE="+1 555 123 4567"
COMPANY_WEBSITE="https://www.yourcompany.com"

# Company Physical Address
COMPANY_STREET="123 Your Business Street"
COMPANY_STREET_LINE2="Suite 100"
COMPANY_CITY="Your City"
COMPANY_POSTAL_CODE="12345"
COMPANY_REGION="Your Region"
COMPANY_COUNTRY="Your Country"

# Legal & Financial Information (SENSITIVE)
COMPANY_VAT_NUMBER="YOUR_VAT_NUMBER_HERE"
COMPANY_REGISTRATION="YOUR_REGISTRATION_NUMBER_HERE"
COMPANY_IBAN="YOUR_IBAN_NUMBER_HERE"
COMPANY_BIC="YOUR_BIC_CODE_HERE"
COMPANY_CURRENCY="EUR"

# -----------------------------------------------------------------------------
# Payment Terms Configuration
# -----------------------------------------------------------------------------

# Payment due period (days)
PAYMENT_DUE_DAYS=30

# Late fee percentage (decimal)
LATE_FEE_PERCENTAGE=1.5

# Early payment discount percentage (decimal)
EARLY_DISCOUNT_PERCENTAGE=2.0

# Early payment discount period (days)
EARLY_DISCOUNT_DAYS=10

# -----------------------------------------------------------------------------
# Invoice Configuration
# -----------------------------------------------------------------------------

# Invoice number prefix (environment-specific)
# Development: "FCALC-DEV-[YYYY]-"
# Staging: "FCALC-STG-[YYYY]-"
# Production: "FCALC-[YYYY]-"
INVOICE_PREFIX="FCALC-STG-[YYYY]-"

# Number of digits for invoice counter (default: 4)
INVOICE_DIGITS=4

# Starting number for invoice counter (default: 1)
INVOICE_STARTING_NUMBER=1

# -----------------------------------------------------------------------------
# Email/SMTP Configuration (SENSITIVE)
# -----------------------------------------------------------------------------

# SMTP Server Settings
# For staging, consider using Mailtrap.io or similar testing service
# For production, use your actual SMTP provider (SendGrid, AWS SES, etc.)

SMTP_HOST="sandbox.smtp.mailtrap.io"
SMTP_PORT=2525
SMTP_USERNAME="your-mailtrap-username"
SMTP_PASSWORD="your-mailtrap-password"
SMTP_USE_TLS=true

# Email Sender Information
EMAIL_FROM_ADDRESS="noreply@firecalc.example.com"
EMAIL_FROM_NAME="FireCalc Staging"

# Admin email for notifications
ADMIN_EMAIL="admin@example.com"

# -----------------------------------------------------------------------------
# GoCardless Payment Gateway Configuration (SENSITIVE)
# -----------------------------------------------------------------------------

# IMPORTANT: Use SANDBOX for staging/testing, LIVE for production only!
# Never use production credentials in staging environment

# GoCardless Environment (sandbox or live)
# STAGING: Always use "sandbox"
# PRODUCTION: Use "live"
GOCARDLESS_ENVIRONMENT=sandbox

# GoCardless Access Token (SENSITIVE)
# Obtain from GoCardless dashboard
# SANDBOX: Test token from sandbox dashboard
# LIVE: Production token (keep highly secure!)
GOCARDLESS_ACCESS_TOKEN="sandbox_your_access_token_here"

# GoCardless Webhook Secret (SENSITIVE)
# Used to verify webhook authenticity
GOCARDLESS_WEBHOOK_SECRET="your_webhook_secret_here"

# GoCardless Admin Email
# Receives payment-related notifications
GOCARDLESS_ADMIN_EMAIL="payments@example.com"

# GoCardless API Base URL (auto-configured based on environment)
# SANDBOX: https://api-sandbox.gocardless.com
# LIVE: https://api.gocardless.com
GOCARDLESS_BASE_URL="https://api-sandbox.gocardless.com"

# Payment redirect URIs
# Use API_DOMAIN for payment redirects
# IMPORTANT: Production URIs MUST be HTTPS
GOCARDLESS_REDIRECT_URI="https://${API_DOMAIN}/v1/payment_complete"
GOCARDLESS_EXIT_URI="https://${API_DOMAIN}/v1/payment_cancelled"

# -----------------------------------------------------------------------------
# Template Styling (OPTIONAL)
# -----------------------------------------------------------------------------

# Invoice/Report template customization
TEMPLATE_LOGO_POSITION="top-left"
TEMPLATE_PRIMARY_COLOR="#2563eb"
TEMPLATE_FONT_FAMILY="Liberation Sans"

# -----------------------------------------------------------------------------
# Retry Configuration (OPTIONAL)
# -----------------------------------------------------------------------------

# Maximum retry attempts for failed operations
RETRY_MAX_RETRIES=5

# Base delay between retries (milliseconds)
RETRY_BASE_DELAY_MS=1000

# Maximum delay between retries (milliseconds)
RETRY_MAX_DELAY_MS=30000

# -----------------------------------------------------------------------------
# Database Configuration (OPTIONAL)
# -----------------------------------------------------------------------------

# Database filename (auto-configured based on environment)
# Staging: firecalc-payments-staging.db
# Production: firecalc-payments.db
# DB_FILENAME="firecalc-payments-staging.db"

# Database path (relative to /app in container)
# DB_PATH="./databases/staging/firecalc-payments-staging.db"

# -----------------------------------------------------------------------------
# Product Catalog Configuration (OPTIONAL)
# -----------------------------------------------------------------------------

# Product catalog to use (development, staging, production)
# Staging typically uses "staging" catalog with test products
PRODUCT_CATALOG=staging

# -----------------------------------------------------------------------------
# Feature Flags (OPTIONAL)
# -----------------------------------------------------------------------------

# Enable/disable invoice generation
INVOICE_GENERATION_ENABLED=true

# Enable/disable email sending
EMAIL_ENABLED=true

# Enable/disable PDF generation
PDF_GENERATION_ENABLED=true

# Report as draft (staging: true, production: false)
REPORT_AS_DRAFT=true

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
#
# 1. Copy this file:
#    cp docker/.env.example .env
#
# 2. Edit .env and replace all placeholder values with your actual information
#    Pay special attention to SENSITIVE fields marked above
#
# 3. Verify domain configuration:
#    - Ensure DNS A/AAAA record points to your server
#    - Wait for DNS propagation (can take up to 48 hours)
#
# 4. For staging environment:
#    - Use GoCardless SANDBOX credentials only
#    - Use test email service (e.g., Mailtrap.io)
#    - Set GOCARDLESS_ENVIRONMENT=sandbox
#
# 5. For production environment:
#    - Use real GoCardless LIVE credentials
#    - Use production SMTP service
#    - Set GOCARDLESS_ENVIRONMENT=live
#    - Ensure all URIs use HTTPS
#
# 6. Security checklist:
#    - Never commit .env file to git (it's in .gitignore)
#    - Restrict file permissions: chmod 600 .env
#    - Use strong passwords and regularly rotate credentials
#    - Keep backup of production .env in secure location
#    - Use secrets management service for production (HashiCorp Vault, AWS Secrets Manager, etc.)
#
# 7. Test configuration:
#    docker-compose config
#    This command validates your docker-compose.yml with .env values
#
# =============================================================================